package com.bftcom.docgenerator.graph.api.model.rawdecl

/**
 * Унифицированный базовый интерфейс для всех сырых деклараций,
 * извлекаемых из исходного кода независимо от языка (Kotlin, Java и т.д.).
 *
 * Это минимальная единица анализа исходника на фазе «walk».
 * В этой фазе мы **не нормализуем** данные под домен (NodeKind и т.п.),
 * а просто сохраняем факты о структуре исходного кода.
 *
 * Каждая декларация (файл, пакет, тип, поле, функция) должна
 * реализовывать этот интерфейс.
 */
sealed interface RawDecl {
    /** Язык исходного файла (например, Kotlin, Java, KTS). */
    val lang: SrcLang

    /** Абсолютный или относительный путь к исходному файлу. */
    val filePath: String

    /** FQN пакета, если указан явно, иначе `null` для default package. */
    val pkgFqn: String?

    /** Диапазон строк (1-based) в исходном файле, если возможно определить. */
    val span: LineSpan?

    /** Сырой текст фрагмента декларации (например, тело класса или функции). */
    val text: String?

    /**
     * Набор дополнительных атрибутов, не попавших в основную модель.
     * Используется для хранения языковых особенностей или специфичных PSI-полей.
     */
    val attributes: Map<String, Any?>
}
